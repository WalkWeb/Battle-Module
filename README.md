## Модуль командного боя

На красивом ООП + unit-тесты

Запуск боя:

`public/index.php`

Запуск тестов:

`php vendor/bin/phpunit`

## Пример

```
use Battle\BattleFactory;
use Battle\View\ViewFactory;

$data = [
    [
        'id'           => '81941b8a-f7ca-447e-8951-36777ae6e79e',
        'name'         => 'Warrior',
        'level'        => 3,
        'avatar'       => '/images/avas/humans/human001.jpg',
        'damage'       => 25,
        'attack_speed' => 1.0,
        'life'         => 110,
        'total_life'   => 110,
        'melee'        => true,
        'class'        => 1,
        'command'      => 'left',
    ],
    [
        'id'           => 'bf75c4a3-b866-4787-88c7-8db57daf3d64',
        'name'         => 'Skeleton',
        'level'        => 2,
        'avatar'       => '/images/avas/monsters/005.png',
        'damage'       => 25,
        'attack_speed' => 1,
        'life'         => 65,
        'total_life'   => 65,
        'melee'        => true,
        'class'        => 3,
        'command'      => 'right',
    ],
];

$view = (new ViewFactory())->create();
echo $view->renderHead(); // example layout styles

$battle = BattleFactory::create($data);
$result = $battle->handle();
echo $view->renderResult($result);
```

## Как выглядит бой

![alt text](public/images/example_start.png)

### ...

![alt text](public/images/example_end.png)

## Планы

- Реализовать создание способности через массив параметров
- Подумать над реализацией ручного режима боя
- Задавать параметр action, concentration and rage у юнита через конструктор
- Убрать здоровье юнитов из сообщения в чате, но добавить цветовое выделение именам и способностям
- Добавить способностям иконки
- Добавить механику увеличения ярости
- В статистику добавить подсчет действий и атак сделанных юнитом (а когда будет добавлена меткость, блоки и криты - 
подсчет и их)
- Добавить расу юнитов (Раса как класс, которая возвращает id расы, название расы, иконку расы, цвет имени расы)
- Добавить особые способности рас: орки двойной урон на низком уровне здоровья, эльфы - способность уклониться от атак
люди - шанс избежать смерти и восстановить 50% здоровья
- Переделать работу Chat - сейчас он хранит не чат, а весь html код боя
- Переделать отображение боя: стартовый вид юнитов, чат, детальный лог боя
- Реализовать анимацию боя на JS и генерацию скрипта для анимации
- Добавить мультиязычность
- Добавить больше разнообразных способностей
- Реализовать механику эффектов
- Расширить варианты классов, добавив новым классам новые варианты способностей
- Переделать простой int урон на объект Damage с расширенными параметрами, такие как шанс крита, сила крита, стихии 
урона и т.д.
- Реализовать расширенный вариант защитных параметров Defence - с такими параметрами как шанс блока, уклонение, 
сопротивления различным стихиям
- Сделать сайт-пример с боем
- Добавить ману
- Добавить параметр магического щита - когда часть урона идет по мане, перед здоровьем
- Сделать все аватары повернутыми вправо, а у правой команды через css разворачивать их по горизонтали, таким образом
все юниты будут смотреть друг на друга
- Добавить механику выбора победителя, когда остались живы обе команды - по количеству здоровья у выживших
- Добавить механику увеличения урона, в слишком долгих боях
- GitLab CI
- Docker
- Добавить параметр отвечающий за того, какой юнит ходит (или случайный)
- К параметру юнита, который ходит, добавить возможную цель для атаки и используемая способность
- Добавить конвертацию любой стадии боя в массив
- Перевести все комментарии в английский
- И многое другое
